<div class="modal-overlay" *ngIf="isOpen" (click)="close()">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <!-- Header -->
    <div class="modal-header d-flex flex-column align-items-start">
      <h5 class="mb-2"> 
        <i class="fa-solid fa-upload mx-1"></i>
ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
      </h5>
      <p>ุงุฎุชุฑ ุงูุทุฑููุฉ ุงูููุงุณุจุฉ ูุฅุฑุณุงู ุทูุจู</p>
    </div>

    <!-- Tabs -->
    <div class="tabs">
      <button
        class="d-flex justify-content-center align-items-center"
        [class.active]="selectedTab === 'file'"
        (click)="selectTab('file')"
      >
        <p class="mb-0 x">ุฑูุน ูููุงุช</p>

        <i class="fa-solid fa-upload mx-2"></i>
      </button>

      <button
        class="d-flex justify-content-center align-items-center"
        [class.active]="selectedTab === 'voice'"
        (click)="selectTab('voice')"
      >
        <p class="mb-0 x">ุชุณุฌูู ุตูุชู</p>
        <i class="fa-solid fa-microphone mx-2"></i>
      </button>

      <button
        class="d-flex justify-content-center align-items-center"
        [class.active]="selectedTab === 'text'"
        (click)="selectTab('text')"
      >
        <p class="mb-0 x">ุฅุฏุฎุงู ูุตู</p>
        <i class="fa-solid fa-file mx-2"></i>
      </button>
    </div>

    <!-- ๐ Text Tab -->
    <div *ngIf="selectedTab === 'text'" class="content-section">
      <label class="label">ุชูุงุตูู ุงูุทูุจ</label>

      <textarea
        class="textarea"
        [(ngModel)]="orderDetails"
        placeholder="ุฃุฏุฎู ุชูุงุตูู ุงูุทูุจ ููุง..."
        rows="6"
      ></textarea>

      <p class="counter">ุนุฏุฏ ุงูุฃุญุฑู: {{ orderDetails?.length || 0 }}</p>

      <div class="tips-box">
        <p class="tips-title">ูุตุงุฆุญ ููุฅุฏุฎุงู ุงููุตู</p>
        <ul>
          <li>ุงุฐูุฑ ุงุณู ุงูุตูู ูุงููููุฉ ุงููุทููุจุฉ</li>
          <li>ุญุฏุฏ ุงูููุงุตูุงุช ุจุฏูุฉ</li>
          <li>ุฃุถู ุฃู ููุงุญุธุงุช ุฎุงุตุฉ ุฅู ูุฌุฏุช</li>
          <li>ุงุณุชุฎุฏู ุงูุฃุฑูุงู ูุงูุชูุงุตูู ุงููุงุถุญุฉ</li>
        </ul>
      </div>
    </div>

    <!-- ๐ค Voice Recorder Tab -->
    <div *ngIf="selectedTab === 'voice'" class="content-section voice-section">
      <div class="voice-box">
        <div
          class="mic-icon d-flex justify-content-center align-items-center shadow-lg"
        >
          <i class="fa-solid fa-microphone"></i>
        </div>

        <button class="record-btn" (click)="toggleRecording()">
          {{ isRecording ? "ุฅููุงู ุงูุชุณุฌูู" : "ุงุจุฏุฃ ุงูุชุณุฌูู" }}
        </button>

        <p *ngIf="audioUrl" class="audio-preview">
          <audio controls [src]="audioUrl"></audio>
        </p>
      </div>

      <div class="tips-box">
        <p class="tips-title">ูุตุงุฆุญ ููุชุณุฌูู ุงูุตูุชู</p>
        <ul>
          <li>ุชุญุฏุซ ุจูุถูุญ ูุจุจุทุก</li>
          <li>ุงุฐูุฑ ุงููููุงุช ูุงูููุงุตูุงุช ุจุฏูุฉ</li>
          <li>ุชุฌูุจ ุงูุถูุถุงุก ูู ุงูุฎูููุฉ</li>
          <li>ุงูุญุฏ ุงูุฃูุตู ููุชุณุฌูู: ูฅ ุฏูุงุฆู</li>
        </ul>
      </div>
    </div>

    <!-- ๐ File Upload Tab -->
    <div *ngIf="selectedTab === 'file'" class="content-section">
      <div
        class="upload-box"
        (drop)="onDrop($event)"
        (dragover)="onDragOver($event)"
      >
        <p>ุงุถุบุท ูุฑูุน ุงููููุงุช</p>
        <p>ุฃู ุงุณุญุจ ุงููููุงุช ูุฃููุชูุง ููุง</p>

        <input type="file" multiple (change)="onFilesSelected($event)" />
      </div>

      <!-- Preview Selected Files -->
      <div *ngIf="files.length > 0" class="file-list">
        <p *ngFor="let file of files">{{ file.name }}</p>
      </div>

      <div class="tips-box">
        <p class="tips-title">ูุตุงุฆุญ ูุฑูุน ุงููููุงุช</p>
        <ul>
          <li>Word: ููุงุณุจ ููููุงุฆู ุงูููุตูุฉ</li>
          <li>Excel: ูุซุงูู ููุฌุฏุงูู ูุงููููุงุช</li>
          <li>ุตูุฑ: ุฎุทุท ุฃู ูุชุงููุฌุงุช ุงูููุชุฌุงุช</li>
          <li>ุงูุญุฏ ุงูุฃูุตู: 10 ููุฌุงุจุงูุช ููููู ุงููุงุญุฏ</li>
        </ul>
      </div>
    </div>

    <!-- Submit -->
    <button class="submit-btn" (click)="submitRequest()">ุฅุฑุณุงู ุงูุทูุจ</button>

    <p class="security-msg">ุฌููุน ุงูุจูุงูุงุช ูุงููููุงุช ูุญููุฉ ููุดูุฑุฉ ๐</p>
  </div>
</div>
